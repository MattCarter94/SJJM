<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html
   xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
   xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <meta charset="utf-8"/>
        <title>IMS Previous Stock Orders</title>
        <meta name="descript ion" content="Search through previous stock orders"/>
<!--         <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script> -->
			<h:outputScript library="primefaces" name="jquery/jquery.js" />
    </h:head>

    
    <body>
        <ui:composition template="templates/template.xhtml">

		<ui:define name="content">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
		<link rel="stylesheet" href="css/Previousstockorders.css"/>
		<script  type="text/javascript" src="js/previousstockorders.js"></script>
		
		<br></br>
		<div class ="container"> 
    		<h1>Past Stock Orders:</h1>
    	</div>
		<br></br>
		<br></br>
		<br></br>
      
        <div class ="container">  
		  <ui:repeat var="stockorder" value="#{stockorders.getStockOrders()}">
			<button class="accordion"><h2>Stock Order: #{stockorder.stockOrderId}</h2><h3>Total: £#{stockline.getStockLinesPrice(stockorder.stockOrderId)}</h3><hr></hr>Order Date: #{stockorder.stockOrderDate.getDate()}/#{stockorder.stockOrderDate.getMonth() + 1}/#{stockorder.stockOrderDate.getYear() - 100} <br></br> Date Received: #{stockorder.stockRecievedDate.getDate()}/#{stockorder.stockRecievedDate.getMonth() + 1}/#{stockorder.stockRecievedDate.getYear() - 100} </button>
				<div class="panel">
			  		<div class="orderTable">
			        	<table>
							<tr>                             
				                <th>Product ID</th>
				                <th>Product Name</th>
				                <th>Category</th>
				                <th>Quantity</th>
				                <th>Unit Price</th>
				                <th>Total Price</th>
				            </tr>	        	
			        	    <h4>Order Lines</h4>   	
					        <ui:repeat var="stockLine" value="#{stockline.getStockLines(stockorder.stockOrderId)}">
				                <tr>
				                    <td>#{stockLine.productId}</td>
				                    <td>#{stockLine.product.getTitle()}</td>
				                    <td>#{stockLine.product.getCategory().toString()}</td>
				                    <td>#{stockLine.quantity}</td>
				                    <td>£#{stockLine.product.getPrice()}</td> 
				                    <td>£#{stockLine.price}</td>
				                </tr>
			               	</ui:repeat>                                   
			            </table>
			         </div>        
				</div>
			 </ui:repeat>
		</div> 
     
        </ui:define>
        </ui:composition>
    </body>
</html>